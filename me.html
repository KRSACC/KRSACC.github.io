<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>내 정보 - KRSACC</title>
</head>
<body>

<h1>내 정보</h1>
<div id="info"></div>
<h3>알림</h3>
<div id="noti"></div>

<script type="module">
import { auth, db } from "./firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

onAuthStateChanged(auth, async user => {
  if (!user) location.href="login.html";

  const q = query(collection(db,"notifications"), where("uid","==",user.uid));
  const snap = await getDocs(q);

  document.getElementById("noti").innerHTML = snap.empty
    ? "알림 없음"
    : snap.docs.map(d=>`<div>${d.data().message}</div>`).join("");
});
</script>
</body>
</html>
